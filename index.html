<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sportsland</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-100">

<!-- ===== 中央容器（FB 版型關鍵）===== -->
<div class="max-w-[720px] mx-auto bg-slate-50 min-h-screen pb-20">

  <!-- ===== Banner ===== -->
  <section class="w-full">
    <img
      src="https://aiwe.cc/wp-content/uploads/2025/12/3486bc19dc6317e16bf4f1449ec52ae4.jpg"
      class="w-full object-cover max-h-[220px]"
    />
  </section>

  <!-- ===== 課程分類 ===== -->
  <section class="px-5 py-4">
    <div class="grid grid-cols-4 gap-3 text-sm text-center">
      <div class="bg-green-600 text-white py-3 rounded-xl font-bold">單日活動</div>
      <div class="bg-white py-3 rounded-xl border text-slate-400">梯次課</div>
      <div class="bg-white py-3 rounded-xl border text-slate-400">營隊</div>
      <div class="bg-white py-3 rounded-xl border text-slate-400">課後班</div>
    </div>
  </section>

  <!-- ===== 單日課程列表 ===== -->
  <section class="px-5 space-y-4" id="course-list">
    <div class="text-center text-slate-400 py-10">載入課程中…</div>
  </section>

</div>

<!-- ===== 底部導覽（固定在視窗底）===== -->
<nav class="fixed bottom-0 left-0 right-0 bg-white border-t grid grid-cols-3 text-sm text-center">
  <a href="index.html" class="py-3 font-bold text-green-600">探索</a>
  <a href="record.html" class="py-3">紀錄</a>
  <a href="member.html" class="py-3">會員</a>
</nav>

<script>
/* =====================
   基本設定
===================== */
const API = 'https://aged-rice-2438.wetw-net3.workers.dev/';

/* =====================
   載入課程
===================== */
(async function loadCourses(){
  try {
    const r = await fetch(`${API}?type=fetch_courses&sheet=SingleCourses&_t=${Date.now()}`);
    const j = await r.json();

    if (j.status !== 'success') throw 'load failed';

    renderCourses(j.data || []);
  } catch (e) {
    document.getElementById('course-list').innerHTML =
      `<div class="text-center text-red-500 py-10">課程載入失敗</div>`;
  }
})();

/* =====================
   Render
===================== */
function renderCourses(list){
  const box = document.getElementById('course-list');

  if (!list.length) {
    box.innerHTML = `<div class="text-center text-slate-400 py-10">目前尚無課程</div>`;
    return;
  }

  box.innerHTML = list.map(c => `
    <div
      class="bg-white rounded-xl shadow p-4 flex gap-4 cursor-pointer hover:shadow-md transition"
      onclick="goBooking('${c.courseId}')"
    >
      <img
        src="${c.coverImage || 'https://via.placeholder.com/120x80'}"
        class="w-28 h-20 object-cover rounded-lg flex-shrink-0"
      />
      <div class="flex-1">
        <h3 class="font-bold text-base mb-1">${c.courseName}</h3>
        <p class="text-xs text-slate-500">
          ${c.courseDate} ${c.startTime} - ${c.endTime}
        </p>
        <p class="text-sm text-green-600 font-bold mt-2">
          $${c.memberPrice || c.price || 0}
        </p>
      </div>
    </div>
  `).join('');
}

/* =====================
   導向 booking
===================== */
function goBooking(id){
  location.href = `booking.html?id=${id}&type=SingleCourses&from=${encodeURIComponent(location.href)}`;
}
</script>

</body>
</html>
